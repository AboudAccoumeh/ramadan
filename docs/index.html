<!DOCTYPE html>
<html>
<head>
	<title>Ramadan kareem</title>
	<meta charset="utf-8"/>	
	<meta name="viewport" content="width=device-width,user-scalable=no"/>
	<style>
		@import url('https://fonts.googleapis.com/css?family=Tangerine');
		@import url('https://fonts.googleapis.com/css2?family=Reem+Kufi&display=swap');
		*{
			margin:0;
			padding:0;
			user-select:none;
		}
		.container{
			position:relative;
			background:linear-gradient(#ffeb3b,#e91e63);
			width:100vw;
			height: calc(var(--vh, 1vh) * 100);
			overflow:hidden;
		}
		.container .text{
			position:absolute;
			top:50%;
			left:50%;
			transform:translate(-50%,-50%);
			text-align:center;
			color:#fff;
			z-index:1;
			font-family:Tangerine;
			text-align:center;
		}
		.container .text.ar *{
			font-family: 'Reem Kufi', sans-serif;
		}
		.container .text p{
			font-size:30px;
			white-space:nowrap;
			text-shadow:0 0 10px #000;
			font-weight:700;
		}
		.container .text h2{
			font-size:40px;
			font-weight:900;
			white-space:nowrap;
			text-shadow:0 0 10px #000;
		}
		.container .text span{
			font-size:35px;
			font-weight:700;
			white-space:nowrap;
			text-shadow:0 0 10px #000;
		}
		.container .text span.red{
			color:#000;
			font-weight:900 !IMPORTANT;
			-webkit-text-stroke-width: 0.5px;
 			-webkit-text-stroke-color: #fff;
		}
		.container .mosque{
			position:absolute;
			left:0;
			bottom:0;
			width:100%;
			height:400px;
			background-image:url(mosque.png);
			background-repeat:repeat-x;
			background-size:1200px;
			animation:animate 10s linear infinite;
		}
		.container .mosque.m2{
			animation:animateReverse 30s linear infinite;
			opacity:0.1;
			height:450px;
		}
		#shareBtn{
			position:absolute;
			bottom:10px;
			right:10px;
			background:lightgreen;
			color:#fff;
			border:none;
			border-radius:10px;
			padding:10px;
			font-family:sans-serif;
			font-size:20px;
			font-weight:500;
			text-shadow:0 0 10px rgba(0,0,0,0.2);
			transition:background-color 500ms linear;
		}
		#shareBtn:hover,#shareBtn:focus{
			outline:none;
		}
		#shareBtn:hover{
			background-color:#6a6;
			
		}
		.popup{
			position:absolute;
			top:50%;
			left:50%;
			transform:translate(-50%,-50%);
			display:none;
			align-items:center;
			justify-content:center;
			flex-direction:column;
			width:250px;
			background:white;
			padding:20px;
			box-shadow:0 0 12px #000;
			border-radius:15px;
			z-index:1000;
		}
		.popup #closePop{
			position:absolute;
			top:4px;
			right:10px;
			text-align:center;
			display:flex;
			align-items:center;
			justify-content:center;
			background:transparent;
			border:none;
			padding:10px;
			width:30px;
			height:30px;
			transition:all 200ms linear;
			box-shadow:none;
		}
		.popup #closePop:hover{
			background:#ddd;
			font-weight:900;
		}
		.popup h1{
			margin-bottom: 20px;
		}
		.popup input{
			width:90%;
			text-align:left;
			font-size:25px;
			font-weight:300;
			padding:5px;
			border-radius:5px;
			border:3px solid #777;
			margin:5px 0;
			margin-bottom:30px;
			user-select:text;
			transition:all 100ms linear;
		}
		.popup input:focus{
			border-color:#77a;
			outline:none;
			box-shadow:0 0 10px skyblue;
		}
		#username.ar{
			text-align:right;
		}
		.popup button{
			width:90%;
			font-size:25px;
			border:none;
			border-radius:6px;
			margin: 8px 0;
			padding:5px;
			box-shadow:0 0 10px rgba(0,0,0,0.2);
			transition:all 200ms linear;
		}
		.popup button:focus,.popup button:hover{
			outline:none;
		}
		#wtShare{
			background:#6a6;
			color:#fff;
		}
		#wtShare:hover{
			background-color:#6e6;
		}
		#otShare{
			background:#e91e63;
			color:#fff;
		}
		#otShare:hover{
			background-color:orange;
		}
		
		@keyframes animate{
			0%{
				background-position:0px;
			}
			100%{
				background-position:1200px;
			}
		}
		@keyframes animateReverse{
			100%{
				background-position:0px;
			}
			0%{
				background-position:1200px;
			}
		}
		@media(min-width:700px){
			.popup{
				width:400px;
			}
			.container .text h2{
				font-size:100px;
			}
			.container .text p{
				font-size:80px
			}
			.container .text span{
				font-size:80px;
			}
		}
		@media(max-width:699px){
			.container .mosque{
				width:200%;
				transform:scale(0.5);
				transform-origin:0 100%;
			}
		}
		canvas{
			position:absolute;
			top:0;
			left:0;
		}
	</style>
	<script data-ad-client="ca-pub-4280006255233463" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>
<body>
	<div class="container">
		<div class="text">
			<p id="name"></p>
			<br>
			<h2 id="rm">Ramadan Mubarak</h2>
			<br>
			<span id="ty">To you and your family</span>
		</div>
		<div class="mosque m2"></div>
		<canvas id="canvas"></canvas>
		<div class="mosque"></div>
		<button id="shareBtn">send congratulations to freinds</button>
		<div class="popup">
			<button id="closePop">&times;</button>
			<h1 id="heading">Send</h1>
			<input id="username" placeholder="Type your name first">
			<button id="wtShare">share via whatsapp</button>
			<button id="otShare">copy link</button>
		</div>
	</div>
	<script>
		var dictionary = {
			en:{
				me: "I",
				ramadanMubarak:"Ramadan Mubarak",
				congratulates:"&nbsp; Congratulates you:",
				toYou:"To you and your family",
				shareButton:"send congratulations to freinds",
				send:"Send",
				placeholder:"Type your name first",
				wtShare:"Share via whatsapp",
				otShare:"Copy link",
				wtMessage1:"your freind",
				wtMessage2:"congratulates you.\nOpen this link below:\n"
			},
			ar:{
				me:"المرسل",
				ramadanMubarak:"رمضان مبارك",
				congratulates:"يهنئك",
				toYou:"لك و لعائلتك",
				shareButton:"ارسال تهنئة الى الأصدقاء",
				send:"إرسال",
				placeholder:"أكتب إسمك أولاً",
				wtShare:"إرسال عبر الواتسأب",
				otShare:"نسخ الرابط",
				wtMessage1:"يقوم صديقك",
				wtMessage2:"بتهنئتك.\nإفتح هذا الرابط أدناه:\n"
			}
		}
		
		var lang = "en";
		var named = document.getElementById("name");
		var ty = document.getElementById("ty");
		var rm = document.getElementById("rm");
		var n = (getParameterByName("n") || dictionary[lang].me);
		var shareBtn = document.getElementById("shareBtn");
		var closePop = document.getElementById("closePop");
		var popup = document.getElementsByClassName("popup")[0];
		var heading = document.getElementById("heading");
		var wtShare = document.getElementById("wtShare");
		var otShare = document.getElementById("otShare");
		var username = document.getElementById("username");
		var container = document.getElementsByClassName("container")[0];
		var c = document.getElementById("canvas");
		var ctx = c.getContext("2d");
		var particles = [];
		var frames = 0;
		var arPat = /[\u0621-\u064A]+/;
		var numPat = /^[0-9]$/;
		var arabic = new RegExp("(" + arPat.source + ")|(" + numPat.source + ")");
		if(arabic.test(n)){
			lang = "ar";
			document.getElementsByClassName("text")[0].className = "text ar";
		}
		if(getParameterByName("g") == "f" && lang == "ar"){
			dictionary[lang].congratulates = "تهنئك";
		}
		named.innerHTML = "<span class='red'>"+n+ "</span>"+" "+ dictionary[lang].congratulates;
		rm.innerHTML = dictionary[lang].ramadanMubarak;
		ty.innerHTML = dictionary[lang].toYou;
		shareBtn.innerHTML = dictionary[lang].shareButton;
		heading.innerHTML = dictionary[lang].send;
		username.setAttribute("placeholder",dictionary[lang].placeholder);
		if(lang=="ar"){username.className="ar";}
		wtShare.innerHTML = dictionary[lang].wtShare;
		otShare.innerHTML = dictionary[lang].otShare;
		
		function getParameterByName(name, url = window.location.href) {
			name = name.replace(/[\[\]]/g, '\\$&');
			var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
			results = regex.exec(url);
			if (!results) return null;
			if (!results[2]) return '';
			return decodeURIComponent(results[2].replace(/\+/g, ' '));
		}
		function cssVarChange(){
			var vh = window.innerHeight * 0.01;
			document.documentElement.style.setProperty('--vh', vh+"px");
		}
		function cResize(){
			c.width = window.innerWidth;
			c.height = window.innerHeight;
		}
		window.addEventListener("load",function (){cssVarChange();cResize();animate();});
		window.addEventListener("resize",function (){cssVarChange();cResize();});
		shareBtn.addEventListener("click",function(){
			popup.style.display = "flex";
		});
		closePop.addEventListener("click",function(){
			popup.style.display = "none";
		});
		wtShare.addEventListener("click",function(){
			if(arabic.test(username.value)){lang = "ar";}
			var a = document.createElement("a");
			a.href = "whatsapp://send?text="+window.encodeURIComponent(dictionary[lang].wtMessage1)+" "+ username.value +" "+window.encodeURIComponent(dictionary[lang].wtMessage2)+window.location.protocol+"//"+window.location.hostname+window.location.pathname+"?n="+window.encodeURIComponent(username.value.toString().split(" ").join("%20"));
			a.setAttribute("data-action","share/whatsapp/share");
			document.body.appendChild(a);
			a.click();
			document.body.removeChild(a);
			popup.style.display = "none";
		});
		otShare.addEventListener("click",function(){
			var el = document.createElement('textarea');
			el.value = dictionary[lang].wtMessage1 +" "+ username.value +" "+dictionary[lang].wtMessage2+window.location.protocol+"//"+window.location.hostname+window.location.pathname+"?n="+username.value.split(" ").join("%20");
			document.body.appendChild(el);
			el.select();
			el.setSelectionRange(0,99999);
			document.execCommand('copy');
			document.body.removeChild(el);
			popup.style.display = "none";
		});
		function Particle(){
			this.r = getRndFloat(1,3);
			this.x = getRndFloat(this.r,100-this.r);
			this.y = 100 + this.r;
			
			this.vx = 0.05;
			this.rvx = {min:-0.5,max:0.5};
			this.ax = getRndFloat(-0.05,0.05);
			
			this.vy = -1;
			this.rvy = {min:0,max:-2.5};
			this.ay = getRndFloat(-1,-0.75);
			
			this.del = false;
			
			this.draw = function(){
				var px = c.width/100;
				var py = c.height/100;
				ctx.fillStyle = "#fff";
				ctx.shadowColor = "#eee";
				ctx.shadowBlur = 60;
				ctx.beginPath();
				ctx.arc(this.x*px,this.y*py,this.r*px,0,2*Math.PI);
				ctx.fill();
				ctx.closePath();
				ctx.shadowColor = "rgba(0,0,0,0)";
			}
			this.update = function(){
				this.x += this.vx;
				this.y += this.vy;
				if(this.vx+this.ax<this.rvx.max && this.vx+this.ax>this.rvx.min){this.vx+=this.ax;}
				if(this.vy+this.ay<this.rvy.max && this.vy+this.ay>this.rvy.min){this.vy+=this.ay;}
				if(this.y-this.r<0){
					this.del = true;
				}
				this.draw();
			}
		}
		function animate(){
			ctx.clearRect(0,0,c.width,c.height);
			for(var i=0;i<particles.length;i++){
				particles[i].update();
				if(particles[i].del){
					particles = remove(particles,i);
				}
			}
			if(frames%10 == 0){
				particles[particles.length] = new Particle();
			}
			frames++;
			window.requestAnimationFrame(animate);
		}
		function getRndFloat(min, max) {
			return Math.random() * (max - min) + min;
		}
		function remove(array,index){
			var arr1 = [];
			var arr2 = [];
			for(var i = 0;i<index;i++){
				arr1[arr1.length] = array[i];
			}
			for(var i=index+1;i<array.length;i++){
				arr2[arr2.length] = array[i];
			}
			for(var i=0;i<arr2.length;i++){
				arr1[arr1.length] = arr2[i];
			}
			return arr1;
		}
	</script>
</body>
</html>
